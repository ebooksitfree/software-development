![Cover image for Designing Event-Driven Systems](https://imgdetail.ebookreading.net/cover/cover/software_development/EB9781492038252.jpg)

[Designing Event-Driven Systems](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_1.html "Designing Event-Driven Systems")
====================================================================================================================

Author : [Ben Stopford](https://ebookreading.net/search/author/Ben+Stopford)

Release Date : 2018/05/01

ISBN : 9781492038252

Topic : [Software Development](https://ebookreading.net/search/category/software-development)

Book Description
-----------------

 Many forces affect software today: larger datasets, geographical disparities, complex company structures, and the growing need to be fast and nimble in the face of change. Proven approaches such as service-oriented and event-driven architectures are joined by newer techniques such as microservices, reactive architectures, DevOps, and stream processing. Many of these patterns are successful by themselves, but as this practical ebook demonstrates, they provide a more holistic and compelling approach when applied together.
Author Ben Stopford explains how service-based architectures and stream processing tools such as Apache Kafka can help you build business-critical systems. You’ll learn how to apply patterns including Event Sourcing and CQRS, and how to build multi-team systems with microservices and SOA using patterns such as "inside out databases" and "event streams as a source of truth." These approaches provide a unique foundation for how these large, autonomous service ecosystems can communicate and share data.
Learn why streaming beats request-response based architectures in complex, contemporary use casesUnderstand why replayable logs such as Kafka provide a backbone for both service communication and shared datasetsExplore how event collaboration and event sourcing patterns increase safety and recoverability with functional, event-driven approachesBuild service ecosystems that blend event-driven and request-driven interfaces using a replayable log and Kafka’s Streams APIScale beyond individual teams into larger, department- and company-sized architectures, using event streams as a source of truth        Show and hide more                
Table of Contents
-----------------

1. [Foreword](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_4.html#foreword)
1. [Preface](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_5.html#preface)
    1. [How to Read This Book](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_5.html#how_to_read_this_bo)
    1. [Acknowledgments](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_5.html#acknowledgments)
1. [I. Setting the Stage](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_6.html#setting_the_stage)
1. [1. Introduction](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_7.html#introduction)
1. [2. The Origins of Streaming](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_8.html#the_origins_of_stre)
1. [3. Is Kafka What You Think It Is?](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_9.html#is_kafka_what_you_t)
    1. [Kafka Is Like REST but Asynchronous?](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_9.html#kafka_is_like_rest_)
    1. [Kafka Is Like a Service Bus?](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_9.html#kafka_is_like_a_ser)
    1. [Kafka Is Like a Database?](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_9.html#kafka_is_like_a_dat)
    1. [What Is Kafka Really? A Streaming Platform](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_9.html#what_is_kafka_reall)
1. [4. Beyond Messaging: An Overview of the Kafka Broker](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_10.html#beyond_messaging_co)
    1. [The Log: An Efficient Structure for Retaining and Distributing Messages](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_10.html#the_log_colon_an_ef)
    1. [Linear Scalability](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_10.html#linear_scalability)
    1. [Segregating Load in Multiservice Ecosystems](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_10.html#segregating_load_in)
    1. [Maintaining Strong Ordering Guarantees](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_10.html#maintaining_strong_)
    1. [Ensuring Messages Are Durable](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_10.html#ensuring_messages_a)
    1. [Load-Balance Services and Make Them Highly Available](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_10.html#load-balance_servic)
    1. [Compacted Topics](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_10.html#compacted_topics)
    1. [Long-Term Data Storage](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_10.html#long-term_data_stor)
    1. [Security](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_10.html#security)
    1. [Summary](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_10.html#summary)
1. [II. Designing Event-Driven Systems](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_11.html#designing_event-dri)
1. [5. Events: A Basis for Collaboration](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_12.html#events_colon_a_basi)
    1. [Commands, Events, and Queries](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_12.html#commands_comma_even)
    1. [Coupling and Message Brokers](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_12.html#coupling_and_messag)
        1. [Is Loose Coupling Always Good?](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_12.html#is_loose_coupling_a)
        1. [Essential Data Coupling Is Unavoidable](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_12.html#lessential_data_cou)
    1. [Using Events for Notification](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_12.html#using_events_as_a_n)
    1. [Using Events to Provide State Transfer](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_12.html#using_events_to_pro)
    1. [Which Approach to Use](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_12.html#which_approach_to_u)
    1. [The Event Collaboration Pattern](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_12.html#the_event_collabora)
    1. [Relationship with Stream Processing](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_12.html#relationship_with_s)
    1. [Mixing Request- and Event-Driven Protocols](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_12.html#mixing_request-_and)
    1. [Summary](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_12.html#summary-id1)
1. [6. Processing Events with Stateful Functions](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_13.html#processing_events_w)
    1. [Making Services Stateful](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_13.html#making_services_sta)
        1. [The Event-Driven Approach](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_13.html#the_event-driven_ap)
        1. [The Pure (Stateless) Streaming Approach](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_13.html#the_pure_open_paren)
        1. [The Stateful Streaming Approach](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_13.html#the_stateful_stream)
        1. [The Practicalities of Being Stateful](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_13.html#the_practicalities_)
    1. [Summary](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_13.html#summary-id2)
1. [7. Event Sourcing, CQRS, and Other Stateful Patterns](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#event_sourcing_comm)
    1. [Event Sourcing, Command Sourcing, and CQRS in a Nutshell](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#event_sourcing_comm)
    1. [Version Control for Your Data](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#version_control_for)
    1. [Making Events the Source of Truth](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#making_events_the_s)
    1. [Command Query Responsibility Segregation](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#command_query_respo)
    1. [Materialized Views](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#materialized_views)
    1. [Polyglot Views](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#polyglot_views)
    1. [Whole Fact or Delta?](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#whole_fact_or_delta)
    1. [Implementing Event Sourcing and CQRS with Kafka](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#implementing_event_)
        1. [Build In-Process Views with Tables and State Stores in Kafka Streams](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#build_in-process_vi)
        1. [Writing Through a Database into a Kafka Topic with Kafka Connect](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#writing_through_a_d)
        1. [Writing Through a State Store to a Kafka Topic in Kafka Streams](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#writing_through_a_s)
        1. [Unlocking Legacy Systems with CDC](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#unlocking_legacy_sy)
        1. [Query a Read-Optimized View Created in a Database](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#query_a_read-optimi)
        1. [Memory Images/Prepopulated Caches](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#memory_images_solid)
        1. [The Event-Sourced View](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#the_event-sourced_v)
    1. [Summary](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_14.html#summary-id3)
1. [III. Rethinking Architecture at Company Scales](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_15.html#rethinking_architec)
1. [8. Sharing Data and Services Across an Organization](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_16.html#sharing_data_and_se)
    1. [Encapsulation Isn’t Always Your Friend](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_16.html#encapsulation_isnat)
    1. [The Data Dichotomy](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_16.html#the_data_dichotomy)
    1. [What Happens to Systems as They Evolve?](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_16.html#what_happens_to_sys)
        1. [The God Service Problem](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_16.html#the_god_service_pro)
        1. [The REST-to-ETL Problem](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_16.html#the_rest-to-etl_pro)
    1. [Make Data on the Outside a First-Class Citizen](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_16.html#make_data_on_the_ou)
    1. [Don’t Be Afraid to Evolve](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_16.html#donat_be_afraid_to_)
    1. [Summary](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_16.html#summary-id4)
1. [9. Event Streams as a Shared Source of Truth](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_17.html#event_streams_as_a_)
    1. [A Database Inside Out](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_17.html#a_database_inside_o)
    1. [Summary](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_17.html#summary-id5)
1. [10. Lean Data](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_18.html#lean_data)
    1. [If Messaging Remembers, Databases Don’t Have To](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_18.html#if_messaging_rememb)
    1. [Take Only the Data You Need, Nothing More](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_18.html#take_only_the_data_)
    1. [Rebuilding Event-Sourced Views](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_18.html#rebuilding_event-so)
        1. [Kafka Streams](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_18.html#kafka_streams)
        1. [Databases and Caches](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_18.html#databases_and_cache)
        1. [Handling the Impracticalities of Data Movement](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_18.html#handling_the_imprac)
    1. [Automation and Schema Migration](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_18.html#automation_and_sche)
        1. [The Data Divergence Problem](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_18.html#the_data_divergence)
    1. [Summary](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_18.html#summary-id6)
1. [IV. Consistency, Concurrency, and Evolution](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_19.html#consistency_comma_c)
1. [11. Consistency and Concurrency in Event-Driven Systems](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_20.html#consistency_and_con)
    1. [Eventual Consistency](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_20.html#eventual_consistenc)
        1. [Timeliness](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_20.html#timeliness)
        1. [Collisions and Merging](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_20.html#collisions_and_merg)
    1. [The Single Writer Principle](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_20.html#the_single_writer_p)
        1. [Command Topic](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_20.html#command_topic)
        1. [Single Writer Per Transition](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_20.html#single_writer_per_t)
    1. [Atomicity with Transactions](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_20.html#atomicity_with_tran)
    1. [Identity and Concurrency Control](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_20.html#identity_and_concur)
    1. [Limitations](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_20.html#limitations)
    1. [Summary](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_20.html#summary-id7)
1. [12. Transactions, but Not as We Know Them](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_21.html#transactions_comma_)
    1. [The Duplicates Problem](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_21.html#the_duplicates_prob)
    1. [Using the Transactions API to Remove Duplicates](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_21.html#using_the_transacti)
    1. [Exactly Once Is Both Idempotence and Atomic Commit](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_21.html#exactly_once_is_bot)
    1. [How Kafka’s Transactions Work Under the Covers](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_21.html#how_kafkaas_transac)
    1. [Store State and Send Events Atomically](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_21.html#store_state_and_sen)
    1. [Do We Need Transactions? Can We Do All This with Idempotence?](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_21.html#do_we_need_transact)
    1. [What Can’t Transactions Do?](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_21.html#what_canat_transact)
    1. [Making Use of Transactions in Your Services](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_21.html#making_use_of_trans)
    1. [Summary](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_21.html#summary-id8)
1. [13. Evolving Schemas and Data over Time](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_22.html#evolving_schemas_an)
    1. [Using Schemas to Manage the Evolution of Data in Time](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_22.html#using_schemas_to_ma)
    1. [Handling Schema Change and Breaking Backward Compatibility](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_22.html#handling_schema_cha)
    1. [Collaborating over Schema Change](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_22.html#collaborating_over_)
    1. [Handling Unreadable Messages](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_22.html#handling_unreadable)
    1. [Deleting Data](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_22.html#deleting_data)
        1. [Triggering Downstream Deletes](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_22.html#triggering_downstre)
    1. [Segregating Public and Private Topics](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_22.html#segregating_public_)
    1. [Summary](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_22.html#idm139800623156448)
1. [V. Implementing Streaming Services with Kafka](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_23.html#implementing_stream)
1. [14. Kafka Streams and KSQL](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_24.html#kafka_streams_and_k)
    1. [A Simple Email Service Built with Kafka Streams and KSQL](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_24.html#a_simple_email_serv)
    1. [Windows, Joins, Tables, and State Stores](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_24.html#windows_comma_joins)
    1. [Summary](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_24.html#idm139800623125808)
1. [15. Building Streaming Services](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_25.html#building_streaming_)
    1. [An Order Validation Ecosystem](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_25.html#an_order_validation)
    1. [Join-Filter-Process](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_25.html#join-filter-process)
    1. [Event-Sourced Views in Kafka Streams](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_25.html#event-sourced_views)
    1. [Collapsing CQRS with a Blocking Read](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_25.html#collapsing_cqrs_wit)
    1. [Scaling Concurrent Operations in Streaming Systems](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_25.html#scaling_concurrent_)
    1. [Rekey to Join](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_25.html#rekey_to_join)
    1. [Repartitioning and Staged Execution](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_25.html#repartitioning_and_)
    1. [Waiting for N Events](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_25.html#waiting_for_n_event)
    1. [Reflecting on the Design](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_25.html#reflecting_on_the_d)
    1. [A More Holistic Streaming Ecosystem](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_25.html#a_more_holistic_str)
    1. [Summary](https://ebookreading.net/view/book/Designing+Event-Driven+Systems-EB9781492038252_25.html#summary-id9)
